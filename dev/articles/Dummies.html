<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Handling categorical predictors • recipes</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.10/font.css" rel="stylesheet">
<link href="../deps/Source_Code_Pro-0.4.10/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Handling categorical predictors">
<meta name="description" content="This vignette describes different methods for encoding categorical
predictors, with special attention to interaction terms and contrasts.
">
<meta property="og:description" content="This vignette describes different methods for encoding categorical
predictors, with special attention to interaction terms and contrasts.
">
<meta property="og:image" content="https://recipes.tidymodels.org/logo.png">
<meta name="robots" content="noindex">
<script defer data-domain="recipes.tidymodels.org,all.tidymodels.org" src="https://plausible.io/js/plausible.js"></script>
</head>
<body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">recipes</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.3.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/recipes.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/Dummies.html">Handling categorical predictors</a></li>
    <li><a class="dropdown-item" href="../articles/Selecting_Variables.html">Selecting variables</a></li>
    <li><a class="dropdown-item" href="../articles/Roles.html">Roles in recipes</a></li>
    <li><a class="dropdown-item" href="../articles/Skipping.html">On skipping steps</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/tidymodels/recipes/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article" id="container">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Handling categorical predictors</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/tidymodels/recipes/blob/main/vignettes/Dummies.Rmd" class="external-link"><code>vignettes/Dummies.Rmd</code></a></small>
      <div class="d-none name"><code>Dummies.Rmd</code></div>
    </div>

    
    
<p>Recipes can be different from their base R counterparts such as
<code>model.matrix</code>. This vignette describes the different methods
for encoding categorical predictors with special attention to
interaction terms and contrasts.</p>
<div class="section level2">
<h2 id="creating-dummy-variables">Creating Dummy Variables<a class="anchor" aria-label="anchor" href="#creating-dummy-variables"></a>
</h2>
<p>Let’s start, of course, with <code>iris</code> data. This has four
numeric columns and a single factor column with three levels:
<code>'setosa'</code>, <code>'versicolor'</code>, and
<code>'virginica'</code>. Our initial recipe will have no outcome:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/tidymodels/recipes" class="external-link">recipes</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># make a copy for use below</span></span>
<span><span class="va">iris</span> <span class="op">&lt;-</span> <span class="va">iris</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>original <span class="op">=</span> <span class="va">Species</span><span class="op">)</span></span>
<span></span>
<span><span class="va">iris_rec</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/recipe.html">recipe</a></span><span class="op">(</span> <span class="op">~</span> <span class="va">.</span>, data <span class="op">=</span> <span class="va">iris</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">iris_rec</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 4</span></span></span>
<span><span class="co">#&gt;   variable     type      role      source  </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Sepal.Length <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor original</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Sepal.Width  <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor original</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Petal.Length <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor original</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Petal.Width  <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor original</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> Species      <span style="color: #949494;">&lt;chr [3]&gt;</span> predictor original</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> original     <span style="color: #949494;">&lt;chr [3]&gt;</span> predictor original</span></span></code></pre></div>
<p>A <a href="https://en.wikipedia.org/wiki/Contrast_(statistics)" class="external-link">contrast
function</a> in R is a method for translating a column with categorical
values into one or more numeric columns that take the place of the
original. This can also be known as an encoding method or a
parameterization function.</p>
<p>The default approach is to create dummy variables using the
“reference cell” parameterization. This means that, if there are
<em>C</em> levels of the factor, there will be <em>C</em> - 1 dummy
variables created and all but the first factor level are made into new
columns:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ref_cell</span> <span class="op">&lt;-</span> </span>
<span>  <span class="va">iris_rec</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/step_dummy.html">step_dummy</a></span><span class="op">(</span><span class="va">Species</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/prep.html">prep</a></span><span class="op">(</span>training <span class="op">=</span> <span class="va">iris</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">ref_cell</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 7 × 4</span></span></span>
<span><span class="co">#&gt;   variable           type      role      source  </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Sepal.Length       <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor original</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Sepal.Width        <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor original</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Petal.Length       <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor original</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Petal.Width        <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor original</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> original           <span style="color: #949494;">&lt;chr [3]&gt;</span> predictor original</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> Species_versicolor <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor derived </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">7</span> Species_virginica  <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor derived</span></span>
<span></span>
<span><span class="co"># Get a row for each factor level</span></span>
<span><span class="fu"><a href="../reference/bake.html">bake</a></span><span class="op">(</span><span class="va">ref_cell</span>, new_data <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">original</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="st">"Species"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 3</span></span></span>
<span><span class="co">#&gt;   original   Species_versicolor Species_virginica</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>                   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> setosa                      0                 0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> versicolor                  1                 0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> virginica                   0                 1</span></span></code></pre></div>
<p>Note that the column that was used to make the new columns
(<code>Species</code>) is no longer there. See the section below on
obtaining the entire set of <em>C</em> columns.</p>
<p>There are different types of contrasts that can be used for different
types of factors. The defaults are <code>"contr.treatment"</code> for
unordered and <code>"contr.poly"</code> for ordered factors.</p>
<p>Looking at <code>?contrast</code>, there are other options. One
alternative is the little known Helmert contrast:</p>
<blockquote>
<p><code>contr.helmert</code> returns Helmert contrasts, which contrast
the second level with the first, the third with the average of the first
two, and so on.</p>
</blockquote>
<p>To get this encoding you can use the <code>contrasts</code> argument
like so:, the global option for the contrasts can be changed and saved.
<a href="https://recipes.tidymodels.org/reference/step_dummy.html"><code>step_dummy</code></a>
picks up on this and makes the correct calculations:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># now make dummy variables with new parameterization</span></span>
<span><span class="va">helmert</span> <span class="op">&lt;-</span> </span>
<span>  <span class="va">iris_rec</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/step_dummy.html">step_dummy</a></span><span class="op">(</span><span class="va">Species</span>, contrasts <span class="op">=</span> <span class="st">"contr.helmert"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/prep.html">prep</a></span><span class="op">(</span>training <span class="op">=</span> <span class="va">iris</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">helmert</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 7 × 4</span></span></span>
<span><span class="co">#&gt;   variable           type      role      source  </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Sepal.Length       <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor original</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Sepal.Width        <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor original</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Petal.Length       <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor original</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Petal.Width        <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor original</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> original           <span style="color: #949494;">&lt;chr [3]&gt;</span> predictor original</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> Species_versicolor <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor derived </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">7</span> Species_virginica  <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor derived</span></span>
<span></span>
<span><span class="fu"><a href="../reference/bake.html">bake</a></span><span class="op">(</span><span class="va">helmert</span>, new_data <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">original</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="st">"Species"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 3</span></span></span>
<span><span class="co">#&gt;   original   Species_versicolor Species_virginica</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>                   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> setosa                     -<span style="color: #BB0000;">1</span>                -<span style="color: #BB0000;">1</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> versicolor                  1                -<span style="color: #BB0000;">1</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> virginica                   0                 2</span></span></code></pre></div>
<p>Note that the column names do not reference a specific level of the
species variable. This contrast function has columns that can involve
multiple levels; level-specific columns wouldn’t make sense.</p>
<p>If no columns are selected (perhaps due to an earlier
<code><a href="../reference/step_zv.html">step_zv()</a></code>), the <code><a href="../reference/bake.html">bake()</a></code> function will return
the data as-is (e.g. with no dummy variables).</p>
<p>Finally, <code><a href="../reference/step_dummy.html">step_dummy()</a></code> has an option called
<code>keep_original_cols</code> that can be used to keep the original
columns that are being used to create the dummy variables.</p>
</div>
<div class="section level2">
<h2 id="interactions-with-dummy-variables">Interactions with Dummy Variables<a class="anchor" aria-label="anchor" href="#interactions-with-dummy-variables"></a>
</h2>
<p>Creating interactions with recipes requires the use of a model
formula, such as</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">iris_int</span> <span class="op">&lt;-</span> </span>
<span>  <span class="va">iris_rec</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/step_interact.html">step_interact</a></span><span class="op">(</span> <span class="op">~</span> <span class="va">Sepal.Width</span><span class="op">:</span><span class="va">Sepal.Length</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/prep.html">prep</a></span><span class="op">(</span>training <span class="op">=</span> <span class="va">iris</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">iris_int</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 7 × 4</span></span></span>
<span><span class="co">#&gt;   variable                   type      role      source  </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                      <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Sepal.Length               <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor original</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Sepal.Width                <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor original</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Petal.Length               <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor original</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Petal.Width                <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor original</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> Species                    <span style="color: #949494;">&lt;chr [3]&gt;</span> predictor original</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> original                   <span style="color: #949494;">&lt;chr [3]&gt;</span> predictor original</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">7</span> Sepal.Width_x_Sepal.Length <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor derived</span></span></code></pre></div>
<p>In <a href="https://stat.ethz.ch/R-manual/R-devel/library/stats/html/formula.html" class="external-link">R
model formulae</a>, using a <code>*</code> between two variables would
expand to <code>a*b = a + b + a:b</code> so that the main effects are
included. In <a href="https://recipes.tidymodels.org/reference/step_interact.html"><code>step_interact</code></a>,
you can use <code>*</code>, but only the interactions are recorded as
columns that need to be created.</p>
<p>One thing that <code>recipes</code> does differently than base R is
it constructs the design matrix in sequential iterations. This is
relevant when thinking about interactions between continuous and
categorical predictors.</p>
<p>For example, if you were to use the standard formula interface, the
creation of the dummy variables happens at the same time as the
interactions are created:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/model.matrix.html" class="external-link">model.matrix</a></span><span class="op">(</span><span class="op">~</span> <span class="va">Species</span><span class="op">*</span><span class="va">Sepal.Length</span>, data <span class="op">=</span> <span class="va">iris</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="co"># show a few specific rows</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">51</span>, <span class="fl">101</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;     (Intercept) Speciesversicolor Speciesvirginica Sepal.Length</span></span>
<span><span class="co">#&gt; 1             1                 0                0          5.1</span></span>
<span><span class="co">#&gt; 51            1                 1                0          7.0</span></span>
<span><span class="co">#&gt; 101           1                 0                1          6.3</span></span>
<span><span class="co">#&gt;     Speciesversicolor:Sepal.Length Speciesvirginica:Sepal.Length</span></span>
<span><span class="co">#&gt; 1                                0                           0.0</span></span>
<span><span class="co">#&gt; 51                               7                           0.0</span></span>
<span><span class="co">#&gt; 101                              0                           6.3</span></span></code></pre></div>
<p>With recipes, you create them sequentially. This raises an issue: do
I have to type out all of the interaction effects by their specific
names when using dummy variables?</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Must I do this?</span></span>
<span><span class="va">iris_rec</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/step_interact.html">step_interact</a></span><span class="op">(</span> <span class="op">~</span> <span class="va">Species_versicolor</span><span class="op">:</span><span class="va">Sepal.Length</span> <span class="op">+</span> </span>
<span>                   <span class="va">Species_virginica</span><span class="op">:</span><span class="va">Sepal.Length</span><span class="op">)</span> </span></code></pre></div>
<p>Not only is this a pain, but it may not be obvious what dummy
variables are available (especially when <a href="https://recipes.tidymodels.org/reference/step_other.html"><code>step_other</code></a>
is used).</p>
<p>The solution is to use a selector:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">iris_int</span> <span class="op">&lt;-</span> </span>
<span>  <span class="va">iris_rec</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/step_dummy.html">step_dummy</a></span><span class="op">(</span><span class="va">Species</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/step_interact.html">step_interact</a></span><span class="op">(</span> <span class="op">~</span> <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="st">"Species"</span><span class="op">)</span><span class="op">:</span><span class="va">Sepal.Length</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/prep.html">prep</a></span><span class="op">(</span>training <span class="op">=</span> <span class="va">iris</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">iris_int</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 9 × 4</span></span></span>
<span><span class="co">#&gt;   variable                          type      role      source  </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                             <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Sepal.Length                      <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor original</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Sepal.Width                       <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor original</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Petal.Length                      <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor original</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Petal.Width                       <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor original</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> original                          <span style="color: #949494;">&lt;chr [3]&gt;</span> predictor original</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> Species_versicolor                <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor derived </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">7</span> Species_virginica                 <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor derived </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">8</span> Species_versicolor_x_Sepal.Length <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor derived </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">9</span> Species_virginica_x_Sepal.Length  <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor derived</span></span></code></pre></div>
<p>What happens here is that <code>starts_with("Species")</code> is
executed on the data that are available when the previous steps have
been applied to the data. That means that the dummy variable columns are
present. The results of this selector are then translated to an additive
function of the results. In this case, that means that</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="st">"Species"</span><span class="op">)</span></span></code></pre></div>
<p>becomes</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">Species_versicolor</span> <span class="op">+</span> <span class="va">Species_virginica</span><span class="op">)</span></span></code></pre></div>
<p>The entire interaction formula is shown here:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">iris_int</span></span></code></pre></div>
<p>For interactions between multiple sets of dummy variables, the
formula could include multiple selectors
(e.g. <code>starts_with("x_"):starts_with("y_")</code>).</p>
</div>
<div class="section level2">
<h2 id="warning">Warning!<a class="anchor" aria-label="anchor" href="#warning"></a>
</h2>
<p>Would it work if I didn’t convert species to a factor and used the
interactions step?</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">iris_int</span> <span class="op">&lt;-</span> </span>
<span>  <span class="va">iris_rec</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/step_interact.html">step_interact</a></span><span class="op">(</span> <span class="op">~</span> <span class="va">Species</span><span class="op">:</span><span class="va">Sepal.Length</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/prep.html">prep</a></span><span class="op">(</span>training <span class="op">=</span> <span class="va">iris</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Categorical variables used in `step_interact()` should probably be</span></span>
<span><span class="co">#&gt; avoided; This can lead to differences in dummy variable values that</span></span>
<span><span class="co">#&gt; are produced by ?step_dummy (`?recipes::step_dummy()`). Please convert</span></span>
<span><span class="co">#&gt; all involved variables to dummy variables first.</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">iris_int</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 8 × 4</span></span></span>
<span><span class="co">#&gt;   variable                         type      role      source  </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                            <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Sepal.Length                     <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor original</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Sepal.Width                      <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor original</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Petal.Length                     <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor original</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Petal.Width                      <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor original</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> Species                          <span style="color: #949494;">&lt;chr [3]&gt;</span> predictor original</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> original                         <span style="color: #949494;">&lt;chr [3]&gt;</span> predictor original</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">7</span> Speciesversicolor_x_Sepal.Length <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor derived </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">8</span> Speciesvirginica_x_Sepal.Length  <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor derived</span></span></code></pre></div>
<p>The columns <code>Species</code> isn’t affected and a warning is
issued. Basically, you only get half of what <code>model.matrix</code>
does and that could really be problematic in subsequent steps.</p>
</div>
<div class="section level2">
<h2 id="getting-all-of-the-indicator-variables">Getting All of the Indicator Variables<a class="anchor" aria-label="anchor" href="#getting-all-of-the-indicator-variables"></a>
</h2>
<p>As mentioned above, if there are <em>C</em> levels of the factor,
there will be <em>C</em> - 1 dummy variables created. You might want to
get all of them back.</p>
<p>Historically, <em>C</em> - 1 are used so that a linear dependency is
avoided in the design matrix; all <em>C</em> dummy variables would add
up row-wise to the intercept column and the inverse matrix for linear
regression can’t be computed. This technical term for a the design
matrix like this is “less than full rank”.</p>
<p>There are models (e.g. <code>glmnet</code> and others) that can avoid
this issue so you might want to get all of the columns. To do this,
<code>step_dummy</code> has an option called <code>one_hot</code> that
will make sure that all <em>C</em> are produced:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">iris_rec</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/step_dummy.html">step_dummy</a></span><span class="op">(</span><span class="va">Species</span>, one_hot <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/prep.html">prep</a></span><span class="op">(</span>training <span class="op">=</span> <span class="va">iris</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/bake.html">bake</a></span><span class="op">(</span><span class="va">original</span>, new_data <span class="op">=</span> <span class="cn">NULL</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="st">"Species"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 4</span></span></span>
<span><span class="co">#&gt;   original   Species_setosa Species_versicolor Species_virginica</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> setosa                  1                  0                 0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> versicolor              0                  1                 0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> virginica               0                  0                 1</span></span></code></pre></div>
<p>The option is named that way since this is what the computer
scientists call <a href="https://www.google.com/search?q=one-hot+encoding" class="external-link">“one-hot
encoding”</a>.</p>
<p><strong><em>Warning!</em></strong> (again)</p>
<p>This will give you the full set of indicators and, when you use the
typical contrast function, it does. It might do some seemingly weird
(but legitimate) things when used with other contrasts:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">hot_reference</span> <span class="op">&lt;-</span> </span>
<span>  <span class="va">iris_rec</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/step_dummy.html">step_dummy</a></span><span class="op">(</span><span class="va">Species</span>, one_hot <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/prep.html">prep</a></span><span class="op">(</span>training <span class="op">=</span> <span class="va">iris</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/bake.html">bake</a></span><span class="op">(</span><span class="va">original</span>, new_data <span class="op">=</span> <span class="cn">NULL</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="st">"Species"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">hot_reference</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 4</span></span></span>
<span><span class="co">#&gt;   original   Species_setosa Species_versicolor Species_virginica</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> setosa                  1                  0                 0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> versicolor              0                  1                 0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> virginica               0                  0                 1</span></span>
<span></span>
<span><span class="va">hot_helmert</span> <span class="op">&lt;-</span> </span>
<span>  <span class="va">iris_rec</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/step_dummy.html">step_dummy</a></span><span class="op">(</span><span class="va">Species</span>, one_hot <span class="op">=</span> <span class="cn">TRUE</span>, contrasts <span class="op">=</span> <span class="st">"contr.helmert"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/prep.html">prep</a></span><span class="op">(</span>training <span class="op">=</span> <span class="va">iris</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/bake.html">bake</a></span><span class="op">(</span><span class="va">original</span>, new_data <span class="op">=</span> <span class="cn">NULL</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="st">"Species"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">hot_helmert</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 4</span></span></span>
<span><span class="co">#&gt;   original   Species_setosa Species_versicolor Species_virginica</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> setosa                  1                  0                 0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> versicolor              0                  1                 0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> virginica               0                  0                 1</span></span></code></pre></div>
<p>Since this contrast doesn’t make sense using all <em>C</em> columns,
it reverts back to the default encoding.</p>
</div>
<div class="section level2">
<h2 id="novel-levels">Novel Levels<a class="anchor" aria-label="anchor" href="#novel-levels"></a>
</h2>
<p>When a recipe is used with new samples, some factors may have
acquired new levels that were not present when <code>prep</code> was
run. If <code>step_dummy</code> encounters this situation, a warning is
issued (“There are new levels in a factor”) and the indicator variables
that correspond to the factor are assigned missing values.</p>
<p>One way around this is to use <code>step_other</code>. This step can
convert infrequently occurring levels to a new category (that defaults
to “other”). This step can also be used to convert new factor levels to
“other” also.</p>
<p>Also, <code>step_integer</code> has functionality similar to <a href="https://scikit-learn.org/stable/modules/generated/sklearn.preprocessing.LabelEncoder.html" class="external-link"><code>LabelEncoder</code></a>
and encodes new values as zero.</p>
<p>The <a href="https://github.com/tidymodels/embed" class="external-link"><code>embed</code></a>
package can also handle novel factors levels within a recipe.
<code>step_embed</code> and <code>step_tfembed</code> assign a common
numeric score to novel levels.</p>
</div>
<div class="section level2">
<h2 id="other-steps-related-to-dummy-variables">Other Steps Related to Dummy Variables<a class="anchor" aria-label="anchor" href="#other-steps-related-to-dummy-variables"></a>
</h2>
<p>There are a bunch of steps related to going in-between factors and
dummy variables:</p>
<ul>
<li>
<a href="https://recipes.tidymodels.org/reference/step_unknown.html"><code>step_unknown</code></a>
assigns missing factor values into an <code>'unknown'</code>
category.</li>
<li>
<a href="https://recipes.tidymodels.org/reference/step_other.html"><code>step_other</code></a>
can collapse infrequently occurring levels into
<code>'other'</code>.</li>
<li>
<a href="https://recipes.tidymodels.org/reference/step_regex.html"><code>step_regex</code></a>
will create a single dummy variable based on applying a regular
expression to a text field. Similarly, <a href="https://recipes.tidymodels.org/reference/step_count.html"><code>step_count</code></a>
does the same but counts the occurrences of the pattern in the
string.</li>
<li>
<a href="https://recipes.tidymodels.org/reference/step_holiday.html"><code>step_holiday</code></a>
creates dummy variables from date fields to capture holidays.</li>
<li>
<a href="https://recipes.tidymodels.org/reference/step_lincomb.html"><code>step_lincomb</code></a>
can be useful if you <em>over-specify</em> interactions and need to
remove linear dependencies.</li>
<li>
<a href="https://recipes.tidymodels.org/reference/step_zv.html"><code>step_zv</code></a>
can remove dummy variables that never show a 1 in the column (i.e. is
zero-variance).</li>
<li>
<a href="https://recipes.tidymodels.org/reference/step_bin2factor.html"><code>step_bin2factor</code></a>
takes a binary indicator and makes a factor variable. This can be useful
when using naive Bayes models.</li>
<li>
<code>step_embed</code>, <code>step_lencode_glm</code>,
<code>step_lencode_bayes</code> and others in the <a href="https://github.com/tidymodels/embed" class="external-link"><code>embed</code></a>
package can use one or more (non-binary) values to encode factor
predictors into a numeric form.</li>
<li>
<code>step_dummy_extract</code> can create binary indicators from
strings and is especially useful for multiple choice columns.</li>
</ul>
<p><a href="https://recipes.tidymodels.org/reference/step_dummy.html"><code>step_dummy</code></a>
also works with <em>ordered factors</em>. As seen above, the default
encoding is to create a series of polynomial variables. There are also a
few steps for ordered factors:</p>
<ul>
<li>
<a href="https://recipes.tidymodels.org/reference/step_ordinalscore.html"><code>step_ordinalscore</code></a>
can translate the levels to a single numeric score.</li>
<li>
<a href="https://recipes.tidymodels.org/reference/step_unorder.html"><code>step_unorder</code></a>
can convert to an unordered factor.</li>
</ul>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/topepo" class="external-link">Max Kuhn</a>, <a href="https://hadley.nz" class="external-link">Hadley Wickham</a>, Emil Hvitfeldt, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

  </div></footer>
</body>
</html>
