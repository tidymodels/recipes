<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Manually alter roles — roles • recipes</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.9/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Manually alter roles — roles"><meta name="description" content="update_role() alters an existing role in the recipe or assigns
an initial role to variables that do not yet have a declared role.
add_role() adds an additional role to variables that already have a role
in the recipe. It does not overwrite old roles, as a single variable can have
multiple roles.
remove_role() eliminates a single existing role in the recipe."><meta property="og:description" content="update_role() alters an existing role in the recipe or assigns
an initial role to variables that do not yet have a declared role.
add_role() adds an additional role to variables that already have a role
in the recipe. It does not overwrite old roles, as a single variable can have
multiple roles.
remove_role() eliminates a single existing role in the recipe."><meta property="og:image" content="https://recipes.tidymodels.org/logo.png"><meta name="robots" content="noindex"><script defer data-domain="recipes.tidymodels.org,all.tidymodels.org" src="https://plausible.io/js/plausible.js"></script></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">recipes</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.2.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/recipes.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/Dummies.html">Handling categorical predictors</a></li>
    <li><a class="dropdown-item" href="../articles/Selecting_Variables.html">Selecting variables</a></li>
    <li><a class="dropdown-item" href="../articles/Roles.html">Roles in recipes</a></li>
    <li><a class="dropdown-item" href="../articles/Skipping.html">On skipping steps</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/tidymodels/recipes/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Manually alter roles</h1>
      <small class="dont-index">Source: <a href="https://github.com/tidymodels/recipes/blob/main/R/roles.R" class="external-link"><code>R/roles.R</code></a></small>
      <div class="d-none name"><code>roles.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>update_role()</code> alters an existing role in the recipe or assigns
an initial role to variables that do not yet have a declared role.</p>
<p><code>add_role()</code> adds an <em>additional</em> role to variables that already have a role
in the recipe. It does not overwrite old roles, as a single variable can have
multiple roles.</p>
<p><code>remove_role()</code> eliminates a single existing role in the recipe.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">add_role</span><span class="op">(</span><span class="va">recipe</span>, <span class="va">...</span>, new_role <span class="op">=</span> <span class="st">"predictor"</span>, new_type <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">update_role</span><span class="op">(</span><span class="va">recipe</span>, <span class="va">...</span>, new_role <span class="op">=</span> <span class="st">"predictor"</span>, old_role <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">remove_role</span><span class="op">(</span><span class="va">recipe</span>, <span class="va">...</span>, <span class="va">old_role</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-recipe">recipe<a class="anchor" aria-label="anchor" href="#arg-recipe"></a></dt>
<dd><p>An existing <code><a href="recipe.html">recipe()</a></code>.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>One or more selector functions to choose which variables are being
assigned a role. See <code><a href="selections.html">selections()</a></code> for more details.</p></dd>


<dt id="arg-new-role">new_role<a class="anchor" aria-label="anchor" href="#arg-new-role"></a></dt>
<dd><p>A character string for a single role.</p></dd>


<dt id="arg-new-type">new_type<a class="anchor" aria-label="anchor" href="#arg-new-type"></a></dt>
<dd><p>A character string for specific type that the variable should
be identified as. If left as <code>NULL</code>, the type is automatically identified
as the <em>first</em> type you see for that variable in <code>summary(recipe)</code>.</p></dd>


<dt id="arg-old-role">old_role<a class="anchor" aria-label="anchor" href="#arg-old-role"></a></dt>
<dd><p>A character string for the specific role to update for the
variables selected by <code>...</code>. <code>update_role()</code> accepts a <code>NULL</code> as long as
the variables have only a single role.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An updated recipe object.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><code>update_role()</code>, <code>add_role()</code> and <code>remove_role()</code> will be applied on a recipe
before any of the steps or checks, regardless of where they are located in
position. This means that roles can only be changed with these three
functions for columns that are already present in the original data supplied
to <code><a href="recipe.html">recipe()</a></code>. See the <code>role</code> argument in some step functions to update roles
for columns created by steps.</p>
<p>Variables can have any arbitrary role (see the examples) but there are three
special standard roles, <code>"predictor"</code>, <code>"outcome"</code>, and <code>"case_weights"</code>. The
first two roles are typically required when fitting a model.</p>
<p><code>update_role()</code> should be used when a variable doesn't currently have a role
in the recipe, or to replace an <code>old_role</code> with a <code>new_role</code>. <code>add_role()</code>
only adds additional roles to variables that already have roles and will
throw an error when the current role is missing (i.e. <code>NA</code>).</p>
<p>When using <code>add_role()</code>, if a variable is selected that already has the
<code>new_role</code>, a warning is emitted and that variable is skipped so no duplicate
roles are added.</p>
<p>Adding or updating roles is a useful way to group certain variables that
don't fall in the standard <code>"predictor"</code> bucket. You can perform a step on
all of the variables that have a custom role with the selector <code><a href="has_role.html">has_role()</a></code>.</p><div class="section">
<h3 id="effects-of-non-standard-roles">Effects of non-standard roles<a class="anchor" aria-label="anchor" href="#effects-of-non-standard-roles"></a></h3>


<p>Recipes can label and retain column(s) of your data set that should not be treated as outcomes or predictors. A unique identifier column or some other ancillary data could be used to troubleshoot issues during model development but may not be either an outcome or predictor.</p>
<p>For example, the <code><a href="https://modeldata.tidymodels.org/reference/biomass.html" class="external-link">modeldata::biomass</a></code> dataset has a column named <code>sample</code> with information about the specific sample type. We can change that role:</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/tidymodels/recipes" class="external-link">recipes</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">biomass</span>, package <span class="op">=</span> <span class="st">"modeldata"</span><span class="op">)</span></span>
<span><span class="va">biomass_train</span> <span class="op">&lt;-</span> <span class="va">biomass</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">100</span>,<span class="op">]</span></span>
<span><span class="va">biomass_test</span> <span class="op">&lt;-</span> <span class="va">biomass</span><span class="op">[</span><span class="fl">101</span><span class="op">:</span><span class="fl">200</span>,<span class="op">]</span></span>
<span></span>
<span><span class="va">rec</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/recipe.html">recipe</a></span><span class="op">(</span><span class="va">HHV</span> <span class="op">~</span> <span class="va">.</span>, data <span class="op">=</span> <span class="va">biomass_train</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/roles.html">update_role</a></span><span class="op">(</span><span class="va">sample</span>, new_role <span class="op">=</span> <span class="st">"id variable"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/step_center.html">step_center</a></span><span class="op">(</span><span class="va">carbon</span><span class="op">)</span></span>
<span></span>
<span><span class="va">rec</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/prep.html">prep</a></span><span class="op">(</span><span class="va">rec</span>, <span class="va">biomass_train</span><span class="op">)</span></span></code></pre><p></p></div>
<p>This means that <code>sample</code> is no longer treated as a <code>"predictor"</code> (the default role for columns on the right-hand side of the formula supplied to <code><a href="recipe.html">recipe()</a></code>) and won't be used in model fitting or analysis, but will still be retained in the data set.</p>
<p>If you really aren't using <code>sample</code> in your recipe, we recommend that you instead remove <code>sample</code> from your dataset before passing it to <code><a href="recipe.html">recipe()</a></code>. The reason for this is because recipes assumes that all non-standard roles are required at <code><a href="bake.html">bake()</a></code> time (or <code><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict()</a></code> time, if you are using a workflow). Since you didn't use <code>sample</code> in any steps of the recipe, you might think that you don't need to pass it to <code><a href="bake.html">bake()</a></code>, but this isn't true because recipes doesn't know that you didn't use it:</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="va">biomass_test</span><span class="op">$</span><span class="va">sample</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span>
<span></span>
<span><span class="fu"><a href="../reference/bake.html">bake</a></span><span class="op">(</span><span class="va">rec</span>, <span class="va">biomass_test</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in `bake()`:</span></span>
<span><span class="co">#&gt; x The following required columns are missing from `new_data`: `sample`.</span></span>
<span><span class="co">#&gt; i These columns have one of the following roles, which are required at `bake()`</span></span>
<span><span class="co">#&gt;   time: `id variable`.</span></span>
<span><span class="co">#&gt; i If these roles are not required at `bake()` time, use</span></span>
<span><span class="co">#&gt;   `update_role_requirements(role = "your_role", bake = FALSE)`.</span></span></code></pre><p></p></div>
<p>As we mentioned before, the best way to avoid this issue is to not even use a role, just remove the <code>sample</code> column from <code>biomass</code> before calling <code><a href="recipe.html">recipe()</a></code>. In general, predictors and non-standard roles that are supplied to <code><a href="recipe.html">recipe()</a></code> should be present at both <code><a href="prep.html">prep()</a></code> and <code><a href="bake.html">bake()</a></code> time.</p>
<p>If you can't remove <code>sample</code> for some reason, then the second best way to get around this issue is to tell recipes that the <code>"id variable"</code> role isn't required at <code><a href="bake.html">bake()</a></code> time. You can do that by using <code><a href="update_role_requirements.html">update_role_requirements()</a></code>:</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="va">rec</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/recipe.html">recipe</a></span><span class="op">(</span><span class="va">HHV</span> <span class="op">~</span> <span class="va">.</span>, data <span class="op">=</span> <span class="va">biomass_train</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/roles.html">update_role</a></span><span class="op">(</span><span class="va">sample</span>, new_role <span class="op">=</span> <span class="st">"id variable"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/update_role_requirements.html">update_role_requirements</a></span><span class="op">(</span><span class="st">"id variable"</span>, bake <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/step_center.html">step_center</a></span><span class="op">(</span><span class="va">carbon</span><span class="op">)</span></span>
<span></span>
<span><span class="va">rec</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/prep.html">prep</a></span><span class="op">(</span><span class="va">rec</span>, <span class="va">biomass_train</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># No errors!</span></span>
<span><span class="va">biomass_test_baked</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/bake.html">bake</a></span><span class="op">(</span><span class="va">rec</span>, <span class="va">biomass_test</span><span class="op">)</span></span></code></pre><p></p></div>
<p>It should be very rare that you need this feature.</p>
</div>

    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/tidymodels/recipes" class="external-link">recipes</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">biomass</span>, package <span class="op">=</span> <span class="st">"modeldata"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Using the formula method, roles are created for any outcomes and predictors:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="recipe.html">recipe</a></span><span class="op">(</span><span class="va">HHV</span> <span class="op">~</span> <span class="va">.</span>, data <span class="op">=</span> <span class="va">biomass</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 8 × 4</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   variable type      role      source  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> sample   <span style="color: #949494;">&lt;chr [3]&gt;</span> predictor original</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> dataset  <span style="color: #949494;">&lt;chr [3]&gt;</span> predictor original</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> carbon   <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor original</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> hydrogen <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor original</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> oxygen   <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor original</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span> nitrogen <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor original</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">7</span> sulfur   <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor original</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">8</span> HHV      <span style="color: #949494;">&lt;chr [2]&gt;</span> outcome   original</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># However `sample` and `dataset` aren't predictors. Since they already have</span></span></span>
<span class="r-in"><span><span class="co"># roles, `update_role()` can be used to make changes, to any arbitrary role:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="recipe.html">recipe</a></span><span class="op">(</span><span class="va">HHV</span> <span class="op">~</span> <span class="va">.</span>, data <span class="op">=</span> <span class="va">biomass</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">update_role</span><span class="op">(</span><span class="va">sample</span>, new_role <span class="op">=</span> <span class="st">"id variable"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">update_role</span><span class="op">(</span><span class="va">dataset</span>, new_role <span class="op">=</span> <span class="st">"splitting variable"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 8 × 4</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   variable type      role               source  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> sample   <span style="color: #949494;">&lt;chr [3]&gt;</span> id variable        original</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> dataset  <span style="color: #949494;">&lt;chr [3]&gt;</span> splitting variable original</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> carbon   <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor          original</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> hydrogen <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor          original</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> oxygen   <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor          original</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span> nitrogen <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor          original</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">7</span> sulfur   <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor          original</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">8</span> HHV      <span style="color: #949494;">&lt;chr [2]&gt;</span> outcome            original</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># `update_role()` cannot set a role to NA, use `remove_role()` for that</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="fu"><a href="recipe.html">recipe</a></span><span class="op">(</span><span class="va">HHV</span> <span class="op">~</span> <span class="va">.</span>, data <span class="op">=</span> <span class="va">biomass</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">update_role</span><span class="op">(</span><span class="va">sample</span>, new_role <span class="op">=</span> <span class="cn">NA_character_</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Variables can have more than one role. `add_role()` can be used</span></span></span>
<span class="r-in"><span><span class="co"># if the column already has at least one role:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="recipe.html">recipe</a></span><span class="op">(</span><span class="va">HHV</span> <span class="op">~</span> <span class="va">.</span>, data <span class="op">=</span> <span class="va">biomass</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">add_role</span><span class="op">(</span><span class="va">carbon</span>, <span class="va">sulfur</span>, new_role <span class="op">=</span> <span class="st">"something"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 10 × 4</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    variable type      role      source  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> sample   <span style="color: #949494;">&lt;chr [3]&gt;</span> predictor original</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> dataset  <span style="color: #949494;">&lt;chr [3]&gt;</span> predictor original</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> carbon   <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor original</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> carbon   <span style="color: #949494;">&lt;chr [2]&gt;</span> something original</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> hydrogen <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor original</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> oxygen   <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor original</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> nitrogen <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor original</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> sulfur   <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor original</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> sulfur   <span style="color: #949494;">&lt;chr [2]&gt;</span> something original</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> HHV      <span style="color: #949494;">&lt;chr [2]&gt;</span> outcome   original</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># `update_role()` has an argument called `old_role` that is required to</span></span></span>
<span class="r-in"><span><span class="co"># unambiguously update a role when the column currently has multiple roles.</span></span></span>
<span class="r-in"><span><span class="fu"><a href="recipe.html">recipe</a></span><span class="op">(</span><span class="va">HHV</span> <span class="op">~</span> <span class="va">.</span>, data <span class="op">=</span> <span class="va">biomass</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">add_role</span><span class="op">(</span><span class="va">carbon</span>, new_role <span class="op">=</span> <span class="st">"something"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">update_role</span><span class="op">(</span><span class="va">carbon</span>, new_role <span class="op">=</span> <span class="st">"something else"</span>, old_role <span class="op">=</span> <span class="st">"something"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 9 × 4</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   variable type      role           source  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> sample   <span style="color: #949494;">&lt;chr [3]&gt;</span> predictor      original</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> dataset  <span style="color: #949494;">&lt;chr [3]&gt;</span> predictor      original</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> carbon   <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor      original</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> carbon   <span style="color: #949494;">&lt;chr [2]&gt;</span> something else original</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> hydrogen <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor      original</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span> oxygen   <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor      original</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">7</span> nitrogen <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor      original</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">8</span> sulfur   <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor      original</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">9</span> HHV      <span style="color: #949494;">&lt;chr [2]&gt;</span> outcome        original</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># `carbon` has two roles at the end, so the last `update_role()` fails since</span></span></span>
<span class="r-in"><span><span class="co"># `old_role` was not given.</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="fu"><a href="recipe.html">recipe</a></span><span class="op">(</span><span class="va">HHV</span> <span class="op">~</span> <span class="va">.</span>, data <span class="op">=</span> <span class="va">biomass</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">add_role</span><span class="op">(</span><span class="va">carbon</span>, <span class="va">sulfur</span>, new_role <span class="op">=</span> <span class="st">"something"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">update_role</span><span class="op">(</span><span class="va">carbon</span>, new_role <span class="op">=</span> <span class="st">"something else"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># To remove a role, `remove_role()` can be used to remove a single role.</span></span></span>
<span class="r-in"><span><span class="fu"><a href="recipe.html">recipe</a></span><span class="op">(</span><span class="va">HHV</span> <span class="op">~</span> <span class="va">.</span>, data <span class="op">=</span> <span class="va">biomass</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">add_role</span><span class="op">(</span><span class="va">carbon</span>, new_role <span class="op">=</span> <span class="st">"something"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">remove_role</span><span class="op">(</span><span class="va">carbon</span>, old_role <span class="op">=</span> <span class="st">"something"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 8 × 4</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   variable type      role      source  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> sample   <span style="color: #949494;">&lt;chr [3]&gt;</span> predictor original</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> dataset  <span style="color: #949494;">&lt;chr [3]&gt;</span> predictor original</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> carbon   <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor original</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> hydrogen <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor original</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> oxygen   <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor original</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span> nitrogen <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor original</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">7</span> sulfur   <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor original</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">8</span> HHV      <span style="color: #949494;">&lt;chr [2]&gt;</span> outcome   original</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># To remove all roles, call `remove_role()` multiple times to reset to `NA`</span></span></span>
<span class="r-in"><span><span class="fu"><a href="recipe.html">recipe</a></span><span class="op">(</span><span class="va">HHV</span> <span class="op">~</span> <span class="va">.</span>, data <span class="op">=</span> <span class="va">biomass</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">add_role</span><span class="op">(</span><span class="va">carbon</span>, new_role <span class="op">=</span> <span class="st">"something"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">remove_role</span><span class="op">(</span><span class="va">carbon</span>, old_role <span class="op">=</span> <span class="st">"something"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">remove_role</span><span class="op">(</span><span class="va">carbon</span>, old_role <span class="op">=</span> <span class="st">"predictor"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 8 × 4</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   variable type      role      source  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> sample   <span style="color: #949494;">&lt;chr [3]&gt;</span> predictor original</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> dataset  <span style="color: #949494;">&lt;chr [3]&gt;</span> predictor original</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> carbon   <span style="color: #949494;">&lt;chr [2]&gt;</span> <span style="color: #BB0000;">NA</span>        original</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> hydrogen <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor original</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> oxygen   <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor original</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span> nitrogen <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor original</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">7</span> sulfur   <span style="color: #949494;">&lt;chr [2]&gt;</span> predictor original</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">8</span> HHV      <span style="color: #949494;">&lt;chr [2]&gt;</span> outcome   original</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># If the formula method is not used, all columns have a missing role:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="recipe.html">recipe</a></span><span class="op">(</span><span class="va">biomass</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 8 × 4</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   variable type      role  source  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> sample   <span style="color: #949494;">&lt;chr [3]&gt;</span> <span style="color: #BB0000;">NA</span>    original</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> dataset  <span style="color: #949494;">&lt;chr [3]&gt;</span> <span style="color: #BB0000;">NA</span>    original</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> carbon   <span style="color: #949494;">&lt;chr [2]&gt;</span> <span style="color: #BB0000;">NA</span>    original</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> hydrogen <span style="color: #949494;">&lt;chr [2]&gt;</span> <span style="color: #BB0000;">NA</span>    original</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> oxygen   <span style="color: #949494;">&lt;chr [2]&gt;</span> <span style="color: #BB0000;">NA</span>    original</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span> nitrogen <span style="color: #949494;">&lt;chr [2]&gt;</span> <span style="color: #BB0000;">NA</span>    original</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">7</span> sulfur   <span style="color: #949494;">&lt;chr [2]&gt;</span> <span style="color: #BB0000;">NA</span>    original</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">8</span> HHV      <span style="color: #949494;">&lt;chr [2]&gt;</span> <span style="color: #BB0000;">NA</span>    original</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/topepo" class="external-link">Max Kuhn</a>, <a href="https://hadley.nz" class="external-link">Hadley Wickham</a>, Emil Hvitfeldt, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

  </div></footer></body></html>

